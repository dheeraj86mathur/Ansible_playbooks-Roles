---
 - name: This playbook can create multiple filesystems on multiple disks, on multiple volume groups as given in the input varfile 
   hosts: "{{ target }}"
   gather_facts: yes
   vars_files: "{{ varfile }}"
   tasks:
     - name: looping role to create multiple filesystem
       include_role:
         name: app_filesystem
       vars:
         vgname: "{{ MOUNTS[item]['vgname'] }}"
         lvname: "{{ MOUNTS[item]['lvname'] }}"
         lvsize: "{{ MOUNTS[item]['lvsize'] }}"
         mountpoint: "{{ MOUNTS[item]['mountpoint'] }}"
         fstab_opts: "{{ MOUNTS[item]['fstab_opts'] | default(omit) }}"
         disklist: "{{ MOUNTS[item]['disklist'] }}"
         username: "{{ MOUNTS[item]['username'] }}"
         groupname: "{{ MOUNTS[item]['groupname'] }}"
       loop: "{{ MOUNTS.keys()|flatten(levels=1) }}"
       register: addfs

